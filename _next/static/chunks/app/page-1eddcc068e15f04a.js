(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6915:(e,t,a)=>{Promise.resolve().then(a.bind(a,9390))},9390:(e,t,a)=>{"use strict";a.d(t,{default:()=>z});var r=a(5155),s=a(2115),l=a(3463),n=a(9795);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,l.$)(t))}let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:o("rounded-xl border bg-card text-card-foreground shadow",a),...s})});i.displayName="Card",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:o("font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:o("p-6 pt-0",a),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";var c=a(2317);let m=(0,a(1027).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:n=!1,...i}=e,d=n?c.DX:"button";return(0,r.jsx)(d,{className:o(m({variant:s,size:l,className:a})),ref:t,...i})});h.displayName="Button";let x=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:o("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});x.displayName="Input";var f=a(6152),u=a(2926),g=a(8131),p=a(8482),y=a(6535),b=a(5012),v=a(6694),w=a(5325),j=a(5524),N=a(6838);let k=s.forwardRef((e,t)=>{let{className:a,value:s,...l}=e;return(0,r.jsx)(N.bL,{ref:t,className:o("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...l,children:(0,r.jsx)(N.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});k.displayName=N.bL.displayName;let S=e=>{let{onNewCard:t}=e,[a,l]=(0,s.useState)(""),[n,o]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),f=async e=>{if(e.preventDefault(),a.trim()){o(!0),m(null);try{let e=await fetch("https://chinese-flashcard-generator.iamtimzhu.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({word:a.trim()})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to generate flashcard")}let r=await e.json();console.log("Anthropic response:",r);let s=null;if(r.content&&Array.isArray(r.content)){for(let e of r.content)if("text"===e.type){let t=e.text.match(/\{[\s\S]*\}/);if(t)try{s=JSON.parse(t[0]);break}catch(e){console.warn("Failed to parse JSON in this content block, trying next one")}}}if(!s)throw Error("Could not extract valid flashcard data from response");let n={word:a.trim(),pinyin:s.pinyin||"",translation:s.translation||"",example:s.example||"",etymology:s.etymology||"",character_components:s.character_components||{},korean_translation:s.korean_translation||""};t(n),l("")}catch(e){console.error("Error generating flashcard:",e),m(e instanceof Error?e.message:"An unknown error occurred")}finally{o(!1)}}};return(0,r.jsx)(i,{className:"w-full bg-white dark:bg-gray-800",children:(0,r.jsx)(d,{children:(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4 pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Add New Word"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(x,{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Enter Chinese word or phrase",className:"flex-1",disabled:n}),(0,r.jsx)(h,{type:"submit",disabled:n||!a.trim(),children:n?"Generating...":"Add"})]}),c&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:c})]})})})};var C=a(3691);let A=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(C.bL,{ref:t,className:o("relative overflow-hidden",a),...l,children:[(0,r.jsx)(C.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(E,{}),(0,r.jsx)(C.OK,{})]})});A.displayName=C.bL.displayName;let E=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...l}=e;return(0,r.jsx)(C.VM,{ref:t,orientation:s,className:o("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,r.jsx)(C.lr,{className:"relative flex-1 rounded-full bg-border"})})});E.displayName=C.VM.displayName;var R=a(8639),L=a(689);let _=e=>{let{cards:t}=e,[a,l]=(0,s.useState)(!1);return a?(0,r.jsx)(i,{className:"fixed bottom-4 right-4 w-96 h-[80vh] z-10",children:(0,r.jsxs)(d,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold",children:["Vocabulary List (",t.length,")"]}),(0,r.jsx)(h,{variant:"ghost",size:"sm",onClick:()=>l(!1),children:(0,r.jsx)(L.A,{className:"w-4 h-4"})})]}),(0,r.jsx)(A,{className:"h-[calc(80vh-100px)]",children:t.length>0?(0,r.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"border-b pb-2",children:[(0,r.jsx)("div",{className:"font-bold",children:e.word}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.pinyin}),(0,r.jsx)("div",{className:"text-sm",children:e.translation})]},e.id||"card-".concat(t)))}):(0,r.jsx)("div",{className:"flex justify-center items-center h-full text-gray-500",children:"No vocabulary words yet"})})]})}):(0,r.jsxs)(h,{variant:"outline",size:"sm",className:"fixed bottom-4 right-4",onClick:()=>l(!0),children:[(0,r.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"Show Vocabulary List (",t.length,")"]})},O=e=>{let{onCorrectPassword:t}=e,[a,l]=(0,s.useState)(""),[n,o]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),u=async e=>{e.preventDefault(),m(!0);try{let e=new TextEncoder().encode(a),r=await crypto.subtle.digest("SHA-256",e);"d5195dceb1b1c2ac4ff7f2e83ac1a6f3f5a5f24370bf3c35c371ead8e5f40a8a"===Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")?(sessionStorage.setItem("isAuthenticated","true"),t()):(o(!0),setTimeout(()=>o(!1),2e3))}catch(e){o(!0),setTimeout(()=>o(!1),2e3)}finally{m(!1)}};return(0,r.jsx)("div",{className:"flex items-center justify-center w-full min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-slate-900",children:(0,r.jsx)(i,{className:"w-full max-w-md mx-4",children:(0,r.jsx)(d,{className:"pt-6",children:(0,r.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)(f.A,{className:"w-12 h-12 text-indigo-500"})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-center mb-4",children:"Enter Password"}),(0,r.jsx)(x,{type:"password",placeholder:"Enter password",value:a,onChange:e=>l(e.target.value),className:"w-full ".concat(n?"border-red-500":""),disabled:c}),n&&(0,r.jsx)("p",{className:"text-red-500 text-sm text-center",children:"Incorrect password"}),(0,r.jsx)(h,{type:"submit",className:"w-full",disabled:c,children:c?"Checking...":"Access Flashcards"})]})})})})},T=e=>{let{text:t,variant:a="default"}=e,[l,n]=(0,s.useState)(!1),o=async()=>{try{n(!0);let e=await fetch("https://chinese-tts-proxy.iamtimzhu.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t})});if(!e.ok){let t=await e.text();throw console.error("TTS Error:",t),Error("Failed to generate speech")}let a=await e.blob(),r=URL.createObjectURL(a),s=new Audio(r);s.onended=()=>{n(!1),URL.revokeObjectURL(r)},await s.play()}catch(e){console.error("Speech error:",e),n(!1)}};return"inline"===a?(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),l||o()},disabled:l,className:"inline-flex items-center justify-center w-6 h-6 ml-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,r.jsx)(u.A,{className:"h-4 w-4 ".concat(l?"text-blue-500":"")})}):(0,r.jsx)(h,{variant:"outline",size:"icon",onClick:e=>{e.stopPropagation(),l||o()},disabled:l,className:"absolute top-4 right-4 bg-white/80 dark:bg-gray-800/80 hover:bg-gray-50 dark:hover:bg-gray-700",children:(0,r.jsx)(u.A,{className:"h-4 w-4 ".concat(l?"text-blue-500":"")})})},z=()=>{var e,t,a,l,n,o,c,m,x;let[f,u]=(0,s.useState)(!1),N="https://flashcard-data.iamtimzhu.workers.dev",C=e=>[...e].sort(()=>Math.random()-.5),[A,E]=(0,s.useState)(0),[R,L]=(0,s.useState)(!1),[z,P]=(0,s.useState)([]),[F,D]=(0,s.useState)("light"),[M,U]=(0,s.useState)(new Set),[I,J]=(0,s.useState)(!1),[V,H]=(0,s.useState)(!0),[K,X]=(0,s.useState)(0),q=async()=>{try{H(!0);let e=await fetch("".concat(N,"/flashcards"));if(!e.ok)throw Error("Failed to fetch flashcards");let t=await e.json();P(C(t||[])),B()}catch(e){console.error("Error fetching flashcards:",e),P([])}finally{H(!1)}},B=async()=>{try{let e=await fetch("".concat(N,"/stats"));if(!e.ok)throw Error("Failed to fetch stats");let t=await e.json();X(t.removedCount||0)}catch(e){console.error("Error fetching stats:",e)}};if((0,s.useEffect)(()=>{J(!0),window.matchMedia("(prefers-color-scheme: dark)").matches&&(D("dark"),document.documentElement.classList.add("dark")),"true"===sessionStorage.getItem("isAuthenticated")&&(u(!0),q())},[]),(0,s.useEffect)(()=>{f&&q()},[f]),!f)return(0,r.jsx)(O,{onCorrectPassword:()=>u(!0)});if(!I||V)return(0,r.jsx)("div",{className:"flex flex-col items-center gap-4 w-full max-w-2xl mx-auto p-4",children:(0,r.jsx)(i,{className:"min-h-[400px] max-h-[600px] max-w-md",children:(0,r.jsx)(d,{className:"h-full flex items-center justify-center p-4",children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:"Loading..."})})})});let G=async()=>{if(z.length<=1)return;let e=z[A];console.log("Attempting to remove card:",e.word),P(e=>e.filter((e,t)=>t!==A)),A===z.length-1&&E(A-1),U(e=>new Set(Array.from(e).filter(e=>e!==A).map(e=>e>A?e-1:e))),L(!1);try{console.log("Sending delete request for word:",e.word);let t=await fetch("".concat(N,"/flashcards/").concat(encodeURIComponent(e.word)),{method:"DELETE"});if(console.log("Delete response status:",t.status),t.ok){let e=await t.json();console.log("Successfully deleted flashcard"),void 0!==e.removedCount&&X(e.removedCount)}else{let e=await t.json();console.error("Failed to delete flashcard:",e.error)}}catch(e){console.error("Error when deleting flashcard:",e)}},Q=z.length>0?M.size/z.length*100:0,W=async e=>{P(t=>[...t,e]);try{let t=await fetch("".concat(N,"/flashcards"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card:e})});if(!t.ok)throw Error("Failed to save flashcard");let a=await t.json();a.card&&a.card.id&&P(t=>t.map(t=>t.word===e.word?{...t,id:a.card.id}:t))}catch(e){console.error("Error saving flashcard:",e)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-slate-900 overflow-auto",children:(0,r.jsxs)("div",{className:"flex flex-col items-center max-w-2xl mx-auto px-6 pt-6 pb-24 min-h-full",children:[(0,r.jsxs)("div",{className:"flex justify-between w-full",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-2 text-amber-500"}),(0,r.jsxs)("span",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:[K," Cards Removed"]})]}),(0,r.jsx)(h,{variant:"outline",size:"icon",onClick:()=>{D(e=>{let t="light"===e?"dark":"light";return"dark"===t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),t})},className:"bg-white dark:bg-gray-800 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700",children:"light"===F?(0,r.jsx)(p.A,{className:"h-4 w-4"}):(0,r.jsx)(y.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"w-full space-y-4 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md mt-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm font-medium",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Study Progress"}),(0,r.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:[Math.round(Q),"% Complete"]})]}),(0,r.jsx)(k,{value:Q,className:"h-2 bg-indigo-100 dark:bg-gray-700",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500 rounded-full"})})]}),(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:z.length>0?"Card ".concat(A+1," of ").concat(z.length):"No cards yet"})})]}),z.length>0?(0,r.jsx)(i,{className:"min-h-[400px] max-h-[600px] w-full cursor-pointer bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 shadow-lg hover:shadow-xl transition-shadow duration-200 mt-4",onClick:()=>{L(!R)},children:(0,r.jsxs)(d,{className:"h-full flex items-center justify-center p-6 relative",children:[R?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-xl sm:text-2xl text-blue-600 dark:text-blue-400",children:null===(t=z[A])||void 0===t?void 0:t.pinyin}),(0,r.jsx)("p",{className:"text-lg sm:text-xl font-medium text-purple-600 dark:text-purple-400",children:null===(a=z[A])||void 0===a?void 0:a.translation}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center",children:[null===(l=z[A])||void 0===l?void 0:l.example,(0,r.jsx)(T,{text:(null===(n=z[A])||void 0===n?void 0:n.example)||"",variant:"inline"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:null===(o=z[A])||void 0===o?void 0:o.etymology}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Character Components:"}),Object.entries((null===(c=z[A])||void 0===c?void 0:c.character_components)||{}).map(e=>{let[t,a]=e;return(0,r.jsxs)("p",{children:[t,": ",Array.isArray(a)?a.join(" â€¢ "):a]},t)})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("h4",{className:"font-medium",children:"Korean Translation:"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:null===(m=z[A])||void 0===m?void 0:m.korean_translation})]})]}):(0,r.jsx)("div",{className:"relative top-20 text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-600 to-rose-600 dark:from-red-400 dark:to-rose-400",children:null===(e=z[A])||void 0===e?void 0:e.word}),(0,r.jsx)(T,{text:(null===(x=z[A])||void 0===x?void 0:x.word)||""})]})}):(0,r.jsx)(i,{className:"min-h-[400px] max-h-[600px] w-full mt-4",children:(0,r.jsx)(d,{className:"h-full flex items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("p",{className:"text-xl",children:"No flashcards yet"}),(0,r.jsx)("p",{className:"mt-2",children:"Add a new word below to get started"})]})})}),(0,r.jsxs)("div",{className:"flex justify-between w-full gap-4 mt-4",children:[(0,r.jsxs)(h,{variant:"outline",onClick:()=>{A>0&&(E(A-1),L(!1))},disabled:0===A||0===z.length,className:"flex-1 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 shadow-sm",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Previous"})]}),(0,r.jsxs)(h,{variant:"outline",onClick:()=>{P(C(z)),E(0),L(!1),U(new Set)},disabled:z.length<=1,className:"flex-1 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 shadow-sm",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Shuffle"})]}),(0,r.jsxs)(h,{variant:"outline",onClick:()=>{A<z.length-1&&(E(A+1),L(!1),U(e=>new Set(e).add(A)))},disabled:A===z.length-1||0===z.length,className:"flex-1 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 shadow-sm",children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,r.jsx)(w.A,{className:"h-4 w-4 ml-2"})]})]}),(0,r.jsx)("div",{className:"pt-8 w-full",children:(0,r.jsx)(S,{onNewCard:W})}),(0,r.jsx)(_,{cards:z}),(0,r.jsxs)(h,{variant:"outline",onClick:G,disabled:z.length<=1,className:"fixed bottom-6 left-6 ml-6 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 shadow-sm text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300",children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-2"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Remove Card"})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[476,441,517,358],()=>t(6915)),_N_E=e.O()}]);